<!DOCTYPE html> 
<html>
<head>

	<meta charset="UTF-8">

	<script src="assets/jquery/jquery-2.2.3.js"></script>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="assets/css/jquery.timepicker.css">

  <link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>
	<body>
  <header>
      <ul id="sidebar" class="side-nav fixed text-white #1565c0 blue darken-3">
        <br>
        <div class="logo">
        <h4 class="center-align white-text"><b><i>TREKHUB</i></b></h4>
        </div>

        <div class="input-field">
          <input id="origin" type="text">
          <label for="orign">Origin</label>
        </div>
        <div class="input-field">
          <input id="destination" type="text">
          <label for="destination">Destination</label>  
          <button class="btn waves-effect waves-light #d81b60 pink darken-1" type="submit" id="submitSearch">Submit</button>  
        </div>
        </br>
        <div>
          <button class="waves-effect waves-light btn modal-trigger" href="#modal2">Schedule</button>
        </div>
          
<!--         <div>
          <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Notes</a>
        </div>
 -->
      </ul>

      <ul id="sidebarB" class="side-nav right-aligned fixed #1565c0 blue darken-3">
        <div id="rightpanel" class="#ffffff white">
        </div>
      </ul>
  </header>

  <main>  
<!-- Header -->
   <nav id="header">
      <div class="nav-wrapper #1565c0 blue darken-3">
        <ul class="right hide-on-med-and-down">
          <li><a href="#"><i class="material-icons"></i></a></li>
          <li><a href="#"><i class="material-icons"></i></a></li>
          <li><a href="#"><i class="material-icons"></i></a></li>
        </ul>
      </div>
    </nav>  
		
		<div class="row">
			<div id="infospace" class="col s10">
				<ul id="buttontabs" class="tabs #42a5f5 blue lighten-1">
        	<li class="tab col s1"><a class="white-text" href="#directions">Map</a></li>
        	<li class="tab col s1"><a class="white-text" href="#weather">Weather</a></li>
        	<li class="tab col s1"><a class="white-text" href="#information">Information</a></li>
      	</ul>
			</div>
			
			<div id="directions" class="col s10">
				<div id="map" class="col s10">
				</div>
				
				</div>	
<!-- Weather Page -->
			<div id="weather" class="col s10 #42a5f5 blue lighten-1">

				<div id="dayA" class="col s4 #42a5f5 blue lighten-1">
					<br>
					<br>
					<h5 class="center-align"><b><span id="dateA" class="white-text"></span></b></h5>
					<div id="icon"></div>
					<h5 class="center-align"><i><span id="conditions" class="white-text"></span></i></h5>
					<h5 class="center-align"><span id="tempA" class="white-text"></span></h5>
				</div>
			
				<div id="dayB" class="col s4 #42a5f5 blue lighten-1">
					<br>
					<br>
					<h5 class="center-align"><b><span id="dateB" class="white-text"></span></b></h5>
					<div id="iconB"></div>
					<h5 class="center-align"><i><span id="conditionsB" class="white-text"></span></i></h5>
					<h5 class="center-align"><span id="tempmaxB" class="white-text"></span></h5>
					<h5 class="center-align"><span id="tempminB" class="white-text"></span></h5>
				</div>	
	
				<div id="dayC" class="col s4 #42a5f5 blue lighten-1">
					<br>
					<br>
					<h5 class="center-align"><b><span id="dateC" class="white-text"></span></b></h5>
					<div id="iconC"></div>
						<h5 class="center-align"><i><span id="conditionsC" class="white-text"></span></i></h5>
					<h5 class="center-align"><span id="tempmaxC" class="white-text"></span></h5>
					<h5 class="center-align"><span id="tempminC" class="white-text"></span></h5>
				</div>

			</div>   	
    	<div id="information" class="col s10 #42a5f5 blue lighten-1">
    		<div id="wikiarticle" class="col s10 white-text #42a5f5 blue lighten-1">
    		</div>
    	</div>
    		  
	</div>
<!-- Hidden Icon Div -->
<div class="row">
  <div id="icondiv" class="col s10">
		<img id="clear" src="assets/images/clear.png" height="120" width="120">
    <img id="mostlycloudy" src="assets/images/mostlycloudy.png" height="120" width="120">
    <img id="cloudy" src="assets/images/cloudy.png" height="120" width="120">
    <img id="rainy" src="assets/images/rainy.png" height="120" width="120">
    <img id="stormy" src="assets/images/stormy.png" height="120" width="120">
    <img id="snowy" src="assets/images/snowy.png" height="120" width="120">

    <img id="clearB" src="assets/images/dayB/clear.png" height="120" width="120">
    <img id="mostlycloudyB" src="assets/images/dayB/mostlycloudy.png" height="120" width="120">
    <img id="cloudyB" src="assets/images/dayB/cloudy.png" height="120" width="120">
    <img id="rainyB" src="assets/images/dayB/rainy.png" height="120" width="120">
    <img id="stormyB" src="assets/images/dayB/stormy.png" height="120" width="120">
    <img id="snowyB" src="assets/images/dayB/snowy.png" height="120" width="120">

    <img id="clearC" src="assets/images/dayC/clear.png" height="120" width="120">
    <img id="mostlycloudyC" src="assets/images/dayC/mostlycloudy.png" height="120" width="120">
    <img id="cloudyC" src="assets/images/dayC/cloudy.png" height="120" width="120">
    <img id="rainyC" src="assets/images/dayC/rainy.png" height="120" width="120">
    <img id="stormyC" src="assets/images/dayC/stormy.png" height="120" width="120">
    <img id="snowyC" src="assets/images/dayC/snowy.png" height="120" width="120">
	
	</div>
</div>
<!-- Map Footer Social Icons -->
  <div class="row">
    <div id="filler" class="col s10 #1565c0 blue darken-3">
      <div id="empty" class="col s2">
      </div>
      <div id="fontA" class="col s2">
        <a href="http://www.github.com/njwest/RedOakNorth" target="_blank"><i class="fa fa-github fa-lg" aria-hidden="true" id="giticon"></i></a>
      </div>
      <div id="fontB" class="col s2">
        <a href="https://developers.google.com/maps/" target="_blank"><i class="fa fa-google fa-lg" aria-hidden="true" id="mapicon"></i></a>
      </div>
      <div id="fontC" class="col s2">
        <a href="https://www.mediawiki.org/wiki/API:Main_page" target="_blank"><i class="fa fa-wikipedia-w fa-lg" aria-hidden="true" id="wikiicon"></i></a>
      </div>

    </div>
  </div>
<!--Footer Modal -->
<!--   <div id="modal1" class="modal bottom-sheet">
    <div class="modal-content">
      <div id="card-panel">

        <form>

        <h2>Notes <input type="text" id="noteInput">
        <input type="submit" value="Add Note" id="addToNotes"></h2>

        </form>
        <div id="notes"></div>

      </div>
      </div>
        <div class="modal-footer">
          <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>
        </div>
    </div> -->
  </div>
      <!-- Schedule Modal -->
          <div id="modal2" class="modal">
            <div class="modal-content">
              <div id="schedule" class="card-panel col s12 z-depth-4 #ffebee">
  
                <h4><i class="small material-icons">assignment</i>Schedule</h4>
                
                  <div id="card-panel">
                    <div id="scheduleCard" class="card-panel">

                      <form>
                        <input id="timePicker">
                        <input type="text" id="schedInput"> 
                        <a class="btn-floating btn-medium waves-effect waves-light blue" type="submit" id="addToSched"><i class="material-icons">add</i></a>

                      </form>
                      <div id="sched">

                      </div>
                    </div>

                  </div>

                      <h4><i class="small material-icons">assignment</i>Notes</h4>
                
                    <div class="card-panel">

                      <form>
                        <input type="text" id="noteInput"> 
                        <a class="btn-floating btn-medium waves-effect waves-light blue" type="submit" id="addToNotes"><i class="material-icons">add</i></a>

                      </form>
                      <div id="notes"></div>
                    </div>

                </div>
            <div class="modal-footer">
              <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>
            </div>
          </div>
        </div>

  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>
  <script src="https://use.fontawesome.com/b2612f81a7.js"></script>
  <script type="text/javascript" src="assets/js/jquery.timepicker.min.js"></script>
  <script type="text/javascript" src="assets/js/schedule.js"></script>
  <script type="text/javascript" src="assets/js/notes.js"></script>
  <script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>
  <script>
    $(document).ready(function(){
        // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
        $('.modal-trigger').leanModal();
      });

    var APIKey = "6e5a54722e9f12c1fb105d9b1b0485f9";

    $('#submitSearch').on('click', function() {

        $("#icon, #iconB, #iconC").children().detach().hide().appendTo("#icondiv");

        $("#rightpanel").fadeIn();
        $("#dayA, #dayB, #dayC").show();
        
        var location = $('#destination').val().trim();
        var queryURL = "http://api.openweathermap.org/data/2.5/weather?q=" + location + "&appid=" + APIKey;
        var queryURLB = "http://api.openweathermap.org/data/2.5/forecast?q=" + location + "&appid=" + APIKey;

        $.ajax({
                url: queryURL,
                method: 'GET'
                })
        .done(function(response) {
          console.log(response);

           var K = response.main.temp;
           var F = (K - 273.15) * 1.80 + 32;
           var temp = Math.round(F);
           var condition = response.weather[0].description;
           var id = response.weather[0].id;
          
          $('#dateA').html("Today");
          $('#tempA').html("Currently: " + temp + "&deg;");
          $('#conditions').html(condition);

          if (id === 800) {
             $('#clear').appendTo('#icon').show().css("display", "block");
          }

          if (id === 701 || id === 721 || id === 801 || id === 802) {
            $('#mostlycloudy').appendTo('#icon').show().css("display", "block");
          }

          if (id === 803 || id === 804) {
            $('#cloudy').appendTo('#icon').show().css("display", "block");
          }

          if (id === 300 || id === 301 || id === 302 || id === 310 || id === 311 || id === 311 || id === 312 || id === 313 || id === 314 || id === 321 || id === 500 || id === 501 || id === 502) {
            $('#rainy').appendTo('#icon').show().css("display", "block");
          }

          if (id === 503 || id === 504 || id === 511 || id === 520 || id === 521 || id === 522 || id === 531) {
            $('#stormy').appendTo('#icon').show().css("display", "block");
          }

          if (id === 600 || id === 601 || id === 602 || id === 611 || id === 612 || id === 615 || id === 616 || id === 620 || id === 621 || id === 622) {
            $('#snowy').appendTo('#icon').show().css("display", "block");
          }
        })

        $.ajax({
          url: queryURLB,
          method: 'GET'
        })
        .done(function(responseB) {
          console.log(responseB);

          var KBMax = responseB.list[5].main.temp_max;
          var KCMax = responseB.list[13].main.temp_max;
          var KBMin = responseB.list[1].main.temp_min;
          var KCMin = responseB.list[9].main.temp_min;
          var FBMax = (KBMax - 273.15) * 1.80 + 32;
          var FCMax = (KCMax - 273.15) * 1.80 + 32;
          var FBMin = (KBMin - 273.15) * 1.80 + 32;
          var FCMin = (KCMin -273.15) * 1.80 + 32;
          var tempBMax = Math.round(FBMax);
          var tempBMin = Math.round(FBMin);
          var tempCMax = Math.round(FCMax); 
          var tempCMin = Math.round(FCMin); 
          var conditionB = responseB.list[4].weather[0].description;
          var idB = responseB.list[4].weather[0].id;
          var conditionC = responseB.list[12].weather[0].description;
          var idC = responseB.list[12].weather[0].id;
          var datestring = responseB.list[8].dt_txt;
          var datemod = datestring.slice(0, 10);
          var dateC = datemod.slice(5, 10); 

          $('#dateB').html("Tomorrow");
          $('#tempmaxB').html("High: " + tempBMax + "&deg;");
          $('#tempminB').html("Low: " + tempBMin + "&deg;");
          $('#tempmaxC').html("High: " + tempCMax + "&deg;");
          $('#tempminC').html("Low: " + tempCMin + "&deg;")
          $('#conditionsB').html(conditionB);
          $('#conditionsC').html(conditionC);
          $('#dateC').html(dateC);


          if (idB === 800) {
             $('#clearB').appendTo('#iconB').show().css("display", "block");
          }

          if (idB === 701 || idB === 721 || idB === 801 || idB === 802) {
            $('#mostlycloudyB').appendTo('#iconB').show().css("display", "block");
          }

          if (idB === 803 || idB === 804) {
            $('#cloudyB').appendTo('#iconB').show().css("display", "block");
          }

          if (idB === 300 || idB === 301 || idB === 302 || idB === 310 || idB === 311 || idB === 311 || idB === 312 || idB === 313 || idB === 314 || idB === 321 || idB === 500 || idB === 501 || idB === 502) {
            $('#rainyB').appendTo('#iconB').show().css("display", "block");
          }

          if (idB === 503 || idB === 504 || idB === 511 || idB === 520 || idB === 521 || idB === 522 || idB === 531) {
            $('#stormyB').appendTo('#iconB').show().css("display", "block");
          }

          if (idB === 600 || idB === 601 || idB === 602 || idB === 611 || idB === 612 || idB === 615 || idB === 616 || idB === 620 || idB === 621 || idB === 622) {
            $('#snowyB').appendTo('#iconB').show().css("display", "block");
          }

          if (idC === 800) {
             $('#clearC').appendTo('#iconC').show().css("display", "block");
          }

          if (idC === 701 || idC === 721 || idC === 801 || idC === 802) {
            $('#mostlycloudyC').appendTo('#iconC').show().css("display", "block");
          }

          if (idC === 803 || idC === 804) {
            $('#cloudyC').appendTo('#iconC').show().css("display", "block");
          }

          if (idC === 300 || idC === 301 || idC === 302 || idC === 310 || idC === 311 || idC === 311 || idC === 312 || idC === 313 || idC === 314 || idC === 321 || idC === 500 || idC === 501 || idC === 502) {
            $('#rainyC').appendTo('#iconC').show().css("display", "block");
          }

          if (idC === 503 || idC === 504 || idC === 511 || idC === 520 || idC === 521 || idC === 522 || idC === 531) {
            $('#stormyC').appendTo('#iconC').show().css("display", "block");
          }

          if (idC === 600 || idC === 601 || idC === 602 || idC === 611 || idC === 612 || idC === 615 || idC === 616 || idC === 620 || idC === 621 || idC === 622) {
            $('#snowyC').appendTo('#iconC').show().css("display", "block");
          }
        })

    $("#destination").val(function (i, v) { 
        return v.replace("Los Angeles, CA","Los Angeles");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("San Diego, CA","San Diego");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("San Francisco, CA","San Francisco");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("Miami, FL","Miami");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("Atlanta, GA","Atlanta");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("Honolulu, HI","Honolulu");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("Chicago, IL","Chicago");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("Indianapolis, IN","Indianapolis");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("Baltimore, MD","Baltimore");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("Detroit, MI","Detroit");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("Minneapolis, MN","Minneapolis");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("Las Vegas, NV","Las Vegas");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("New York, NY","New York City");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("Oklahoma City, OK","Oklahoma");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("Philadelphia, PA","Philadelphia");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("Houston, TX","Houston");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("Dallas, TX","Dallas");
        });
        
        $("#destination").val(function (i, v) { 
        return v.replace("Salt Lake City, UT","Salt Lake City");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("Seattle, WA","Seattle");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("Milwaukee, WI","Milwaukee");
        });
        
        $("#destination").val(function (i, v) { 
         return v.replace("AL","Alabama");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("AK","Alaska");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("AZ","Arizona");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("AR","Arkansas");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("CA","California");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("CO","Colorado");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("CT","Connecticut");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("DE","Delaware");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("DC","District of Columbia");
        }); 

        $("#destination").val(function (i, v) { 
        return v.replace("FL","Florida");
        }); 

        $("#destination").val(function (i, v) { 
        return v.replace("GA","Georgia");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("HI","Hawaii");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("ID","Idaho");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("IL","Illinois");
        });    

        $("#destination").val(function (i, v) { 
        return v.replace("IN","Indiana");
        });    

        $("#destination").val(function (i, v) { 
        return v.replace("IA","Iowa");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("KS","Kansas");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("KY","Kentucky");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("LA","Louisiana");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("ME","Maine");
        });
        
        $("#destination").val(function (i, v) { 
        return v.replace("MD","Maryland");
        });    

        $("#destination").val(function (i, v) { 
        return v.replace("MA","Massachusetts");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("MI","Michigan");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("MN","Minnesota");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("MS","Mississippi");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("MO","Missouri");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("MT","Montana");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("NB","Nebraska");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("NV","Nevada");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("NH","New Hampshire");
        });

        $("#destination").val(function (i, v) { 
         return v.replace("NJ","New Jersey");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("NM","New Mexico");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("NY","New York");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("NC","North Carolina");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("OH","Ohio");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("OK","Oklahoma");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("OR","Oregon");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("PA","Pennsylvania");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("RI","Rhode Island");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("SC","South Carolina");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("TN","Tennessee");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("TX","Texas");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("UT","Utah");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("VT","Vermont");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("VA","Virginia");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("WA","Washington");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("WV","West Virginia");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("WI","Wisconsin");
        });

        $("#destination").val(function (i, v) { 
        return v.replace("WY","Wyoming");
        });

        var searchTerm = $("#destination").val().trim();
        
            $('#wikiarticle').wikiblurb({
            wikiURL: "https://en.wikipedia.org/",
            apiPath: 'w',
            section: 0,
            page: searchTerm,
            removeLinks: true,     
            type: 'text',
            customSelector: '',
            callback: function(){ 
                console.log('Data loaded...');
            }

        });


       });

    function initMap() {
        var directionsDisplay = new google.maps.DirectionsRenderer;
        var directionsService = new google.maps.DirectionsService;
        var mapDiv = document.getElementById('map');
        var map = new google.maps.Map(mapDiv, {
          center: {lat: 40.4862, lng: -74.4518},
          zoom: 10, 
          mapTypeControlOptions: {
            style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
            position: google.maps.ControlPosition.TOP_CENTER
        }
        });
        directionsDisplay.setMap(map);
        directionsDisplay.setPanel(document.getElementById('rightpanel'));

        var trafficLayer = new google.maps.TrafficLayer();
        trafficLayer.setMap(map);

        var onChangeHandler = function () {
        calculateAndDisplayRoute(directionsService, directionsDisplay);
        };
        document.getElementById('submitSearch').addEventListener('click', onChangeHandler);
      }
          
    function calculateAndDisplayRoute(directionsService, directionsDisplay) {
        var start = $('#origin').val().trim();
        var end = $('#destination').val().trim();
            directionsService.route({
              origin: start,
              destination: end,
              travelMode: google.maps.TravelMode.DRIVING
           }, function(response, status) {
              if (status === google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(response);
              } else {
                window.alert('Directions request failed due to ' + status);
              }
            });
          }

    (function ($) {

        $.fn.wikiblurb = function (options) {

          var defaults = $.extend({
          wikiURL: "https://en.wikipedia.org/",
          apiPath: 'w',
          section: 0,
          page: 'Jimi_Hendrix',
          removeLinks: true,      
          type: 'all'
            }, options);
            
      /******************************
      Private Variables
      *******************************/         

      var object = $(this);
      var settings = $.extend(defaults, options);
      
      /******************************
      Public Methods
      *******************************/         
            
            var methods = {
              
          init: function() {
        return this.each(function () {
            methods.appendHTML();
            methods.initializeItems();
        });
          },
          
          /******************************
          Append HTML
          *******************************/      

          appendHTML: function() {
        // nothiing to append
          },

          /******************************
          Initialize
          *******************************/      

          initializeItems: function() {
        $.ajax({
            type: "GET",
            url: settings.wikiURL + settings.apiPath + "/api.php?action=parse&format=json&prop=text&section="+settings.section+"&page="+settings.page+"&callback=?",
            contentType: "application/json; charset=utf-8",
            async: false,
            dataType: "json",
            success: function (data, textStatus, jqXHR) {

          var markup = data.parse.text["*"];
          var blurb = $('<div></div>').html(markup);

          // remove links as they will not work
          
          if(settings.removeLinks) {
              blurb.find('a').each(function() { 
            $(this).replaceWith($(this).html()); 
              });
          }
          else {
              blurb.find('a').each(function() {
            var link = $(this);
            var relativePath = link.attr('href').substring(1); // remove leading slash
            link.attr('href', settings.wikiURL + relativePath); 
              });         
          }
              
          // remove any references
          blurb.find('sup').remove();

          // remove cite error
          blurb.find('.mw-ext-cite-error').remove();
          
          if(settings.type === 'text')
              object.html($(blurb).find('p'));
          else if(settings.type === 'blurb') 
              object.html($(blurb).find('p:first'));
          else if(settings.type === 'infobox') 
              object.html($(blurb).find('.vcard'));     
          else
              object.html(blurb);
          
            },
            error: function (errorMessage) {
          return 'There was an error fetching your Wikiblurb...';
            }
        });
          }     

            };
            
            if (methods[options]) { // $("#element").pluginName('methodName', 'arg1', 'arg2');
                return methods[options].apply(this, Array.prototype.slice.call(arguments, 1));
            } else if (typeof options === 'object' || !options) {   // $("#element").pluginName({ option: 1, option:2 });
                return methods.init.apply(this);  
            } else {
                $.error( 'Method "' +  method + '" does not exist in wikiblurb plugin!');
            } 
        };

    })(jQuery);

  </script>
  

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyClUkAANYUbEx1dI5uNBpXNrn8Ae4QAjNQ&callback=initMap">
  </script>

</body>
</html>